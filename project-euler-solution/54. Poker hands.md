## **[54. Poker hands](https://projecteuler.net/problem=54)**

### Question
Given one-thousand random hands dealt to two players. How many hands does Player 1 win?

### Solution
Pure coding question.

```python
from collections import Counter

def royal_flush(cards):
    return straight_flush(cards) and min(v for v, s in cards) == 10

def straight_flush(cards):
    return straight(cards) and flush(cards)

def four_of_a_kind(cards):
    d = Counter(v for v, s in cards)
    return max(d.values()) == 4

def full_house(cards):
    d = Counter(v for v, s in cards)
    return max(d.values()) == 3 and min(d.values()) == 2

def flush(cards):
    return len({s for v, s in cards}) == 1

def straight(cards):
    values = [v for v, s in cards]
    return sorted(values) == list(range(min(values), max(values) + 1))

def three_of_a_kind(cards):
    d = Counter(v for v, s in cards)
    return max(d.values()) == 3

def two_pairs(cards):
    d = Counter(v for v, s in cards)
    return sum(1 for v in d.values() if v == 2) == 2

def one_pair(cards):
    d = Counter(v for v, s in cards)
    return max(d.values()) == 2

def high_card(cards):
    return max(v for v, s in cards)

def to_sorted_cards(raw_cards):
    """sort by freq first then value"""
    map = {'T':10, 'J':11, 'Q':12, 'K':13, 'A':14}
    cards = []
    for s in raw_cards:
        if s[0].isnumeric():
            cards.append((int(s[0]), s[1]))
        else:
            cards.append((map[s[0]], s[1]))
    counts = Counter(v for v, s in cards)
    return sorted(cards, key=lambda card: (counts[card[0]], card[0]), reverse=True)

def first_win(sorted_c1, sorted_c2):
    for i in range(5):
        if sorted_c1[i][0] != sorted_c2[i][0]:
            return False if sorted_c1[i][0] < sorted_c2[i][0] else True

def evaluate(cards):
    if royal_flush(cards): return 10
    if straight_flush(cards): return 9
    if four_of_a_kind(cards): return 8
    if full_house(cards): return 7
    if flush(cards): return 6
    if straight(cards): return 5
    if three_of_a_kind(cards): return 4
    if two_pairs(cards): return 3
    if one_pair(cards): return 2
    if high_card(cards): return 1
    return 0

def p54():
    cnt = 0
    with open('p054_poker.txt') as f:
        for line in f:
            cards = line.split()
            c1 = to_sorted_cards(cards[:5])
            c2 = to_sorted_cards(cards[5:])
            v1 = evaluate(c1)
            v2 = evaluate(c2)
            if v1 > v2 or (v1 == v2 and first_win(c1, c2)):
                cnt += 1
    return cnt
```

### Answer 
`376`
